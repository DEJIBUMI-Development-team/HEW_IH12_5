<html>
  <body>
    <div class="button" onclick="selectShort()">çŸ­æ–‡</div>
    <div class="button" onclick="selectLong()">é•·æ–‡</div>
    <div id="soto"></div>
  </body>
  <script>
  const shortText = "ãŠå¯¿å¸é£Ÿã¹ãŸã„ğŸ£";
  const longText = "ç§ãŒå¥½ããªãŠå¯¿å¸ã®ãƒã‚¿ã¨ã—ã¦ã€ã‚µãƒ¼ãƒ¢ãƒ³ã€æœ¬ãƒã‚°ãƒ­ã€ã¯ã¾ã¡ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚ã„ãšã‚Œã«ã—ã¦ã‚‚è„‚ãŒã®ã£ã¦ã„ã¦ã¨ã¦ã‚‚æ°—ã«å…¥ã£ã¦ã„ã¾ã™ã€‚ãã†ã„ãˆã°ãŠå¯¿å¸å±‹ã•ã‚“ã¨ã„ãˆã°å¼Šç¤¾ã‹ã‚‰æ­©ã„ã¦ã‚‚è¡Œã‘ã‚‹ã¨ã“ã‚ã«ã€ç§ãŒã‚ˆãè¡ŒããŠåº—ãŒã‚ã‚‹ã®ã§ã™ãŒã€1000å††ä»¥ä¸‹ã‹ã‚‰é£Ÿã¹ã‚‰ã‚Œã‚‹ã€Œå›ã‚‰ãªã„ãŠå¯¿å¸ã€ã§ã¨ã¦ã‚‚ãŠã„ã—ã„ã§ã™ã€‚ç§ä¸€äººã§ã‚‚ã€åŒåƒšã¨ã®ãƒ©ãƒ³ãƒã§ã‚‚è¡Œãã¾ã™ã€‚";
  const textElem = document.getElementById("soto");
 
  function selectShort() {
    textElem.innerText = shortText;
    resize();
  }
 
  function selectLong() {
    textElem.innerText = longText;
    resize();
  }
 
  function resize() {
    /* æ–‡å­—æ•°ãŒå°‘ãªããªã£ãŸã¨ãã®ãŸã‚ã€ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’æˆ»ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
    ä»–ã«styleã®å±æ€§ãŒã‚ã‚Œã°font-sizeã«é–¢ã™ã‚‹ã¨ã“ã‚ã‚’é™¤ã„ã¦styleã«ä¸Šæ›¸ãã—ã¾ã—ã‚‡ã†ã€‚
    ä»Šå›ã¯ãªã„ã®ã§styleå±æ€§ã”ã¨å‰Šé™¤ã—ã¾ã™ã€‚*/
    textElem.removeAttribute('style');
    console.log(textElem.getBoundingClientRect().height , textElem.scrollHeight);
    for (
      let size = 30;
      textElem.getBoundingClientRect().heightã€€< textElem.scrollHeight && size > 10;
      size -= 3
      /* æ–‡å­—ãŒã¯ã¿å‡ºã™ã‚µã‚¤ã‚ºãŒå­˜åœ¨ã—ã¦ã„ãŸã®ã§ã€1ãšã¤æ¸›ã‚‰ã™ã®ã‚’3ãšã¤æ¸›ã‚‰ã™ã¨ã„ã†å°‘ã—é€Ÿã„ãƒšãƒ¼ã‚¹ã§ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å°ã•ãã—ã¦ã¿ã¾ã—ãŸã€‚
      ã“ã¡ã‚‰ã«ã¯æ­£è§£ä¸æ­£è§£ã¯ãªãã€å ´åˆã«ã‚ˆã£ã¦èª¿æ•´ã—ã¦éŠã‚“ã§ã¿ã¦ãã ã•ã„ã€‚*/
    ) {
      textElem.style.fontSize = size + "px";
      // textElem.setAttribute("style", `font-size: ${size}px`); // ã“ã¡ã‚‰ã‚‚å¯èƒ½
    }
  }
 
  //ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ã„ãŸã¨ã
  selectShort();
 
  //ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã‚’å¤‰ãˆãŸã¨ã
  window.addEventListener('resize', () => {
    resize();
  });
 
  </script>
  <style>
  .button {
    width: 100px;
    margin: 8px;
    padding: 8px;
    font-size: 24px;
    background-color: #ff8900;
  }
 
  #soto {
    width: 90%;
    height: 216px;
    font-size: 30px;
    border: 3px solid #ff8900;
    padding:8px;
 
    /*
    1è¡Œã§çœç•¥ã™ã‚‹ã¨ã
    */
    /*
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    */
 
    /*
    è¤‡æ•°è¡Œã§çœç•¥ã™ã‚‹æ™‚ã€€
    */
    /*
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 5;
    */
  }
  </style>
</html>